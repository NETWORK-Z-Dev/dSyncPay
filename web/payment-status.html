<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Status</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;500&family=IBM+Plex+Sans:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --bg: #0a0a0a;
            --surface: #101010;
            --border: #1c1c1c;
            --border-bright: #252525;
            --text: #d8d8d8;
            --text-dim: #555;
            --text-dimmer: #2e2e2e;
            --accent: #00e676;
            --accent-glow: rgba(0, 230, 118, 0.12);
        }

        html, body { height: 100%; }

        body {
            background: var(--bg);
            color: var(--text);
            font-family: 'IBM Plex Sans', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            overflow: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            inset: 0;
            background-image:
                    linear-gradient(var(--border) 1px, transparent 1px),
                    linear-gradient(90deg, var(--border) 1px, transparent 1px);
            background-size: 40px 40px;
            opacity: 0.45;
            pointer-events: none;
            z-index: 0;
        }

        body::after {
            content: '';
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 700px;
            height: 700px;
            background: radial-gradient(circle, var(--accent-glow) 0%, transparent 65%);
            pointer-events: none;
            z-index: 0;
            animation: glow-pulse 5s ease-in-out infinite;
        }

        @keyframes glow-pulse {
            0%, 100% { opacity: 0.6; transform: translate(-50%, -50%) scale(1); }
            50%       { opacity: 1;   transform: translate(-50%, -50%) scale(1.08); }
        }

        /* error/cancelled glow override */
        body.status-error::after {
            background: radial-gradient(circle, rgba(255, 82, 82, 0.1) 0%, transparent 65%);
        }
        body.status-cancelled::after {
            background: radial-gradient(circle, rgba(255, 193, 7, 0.08) 0%, transparent 65%);
        }

        .container {
            position: relative;
            z-index: 1;
            width: 100%;
            max-width: 460px;
            padding: 0 24px;
            animation: fade-up 0.5s cubic-bezier(0.16, 1, 0.3, 1) both;
        }

        @keyframes fade-up {
            from { opacity: 0; transform: translateY(20px); }
            to   { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: var(--surface);
            border: 1px solid var(--border-bright);
            border-radius: 12px;
            padding: 36px;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
            opacity: 0.5;
            transition: background 0.3s;
        }

        .card.status-error::before {
            background: linear-gradient(90deg, transparent, #ff5252, transparent);
        }
        .card.status-cancelled::before {
            background: linear-gradient(90deg, transparent, #ffc107, transparent);
        }

        .header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .icon-svg {
            flex-shrink: 0;
            width: 22px;
            height: 22px;
        }

        /* success */
        .check-circle {
            fill: none;
            stroke: var(--accent);
            stroke-width: 1.5;
            stroke-dasharray: 69;
            stroke-dashoffset: 69;
            animation: draw-circle 0.45s ease 0.1s forwards;
        }
        .check-tick {
            fill: none;
            stroke: var(--accent);
            stroke-width: 1.8;
            stroke-linecap: round;
            stroke-linejoin: round;
            stroke-dasharray: 16;
            stroke-dashoffset: 16;
            animation: draw-tick 0.3s ease 0.45s forwards;
        }
        @keyframes draw-circle { to { stroke-dashoffset: 0; } }
        @keyframes draw-tick   { to { stroke-dashoffset: 0; } }

        /* error */
        .error-circle {
            fill: none;
            stroke: #ff5252;
            stroke-width: 1.5;
            stroke-dasharray: 69;
            stroke-dashoffset: 69;
            animation: draw-circle 0.45s ease 0.1s forwards;
        }
        .error-x {
            stroke: #ff5252;
            stroke-width: 1.8;
            stroke-linecap: round;
            stroke-dasharray: 20;
            stroke-dashoffset: 20;
            animation: draw-tick 0.3s ease 0.45s forwards;
        }

        /* cancelled */
        .cancelled-circle {
            fill: none;
            stroke: #ffc107;
            stroke-width: 1.5;
            stroke-dasharray: 69;
            stroke-dashoffset: 69;
            animation: draw-circle 0.45s ease 0.1s forwards;
        }
        .cancelled-line {
            stroke: #ffc107;
            stroke-width: 1.8;
            stroke-linecap: round;
            stroke-dasharray: 12;
            stroke-dashoffset: 12;
            animation: draw-tick 0.3s ease 0.45s forwards;
        }

        h1 {
            font-size: 20px;
            font-weight: 500;
            letter-spacing: -0.2px;
            color: var(--text);
            line-height: 1;
        }

        .subtitle {
            font-size: 13px;
            color: var(--text-dim);
            font-weight: 300;
            margin-bottom: 28px;
            margin-top: 6px;
            padding-left: 34px;
            line-height: 1.5;
        }

        .details {
            display: flex;
            flex-direction: column;
            gap: 1px;
            background: var(--border);
            border-radius: 8px;
            overflow: hidden;
            animation: fade-up 0.4s ease 0.25s both;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 11px 14px;
            background: var(--bg);
            gap: 16px;
        }

        .detail-label {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 11px;
            color: var(--text-dimmer);
            text-transform: uppercase;
            letter-spacing: 0.07em;
            white-space: nowrap;
        }

        .detail-value {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 12px;
            color: var(--text-dim);
            text-align: right;
            word-break: break-all;
        }

        .detail-value.accent        { color: var(--accent); }
        .detail-value.accent-error  { color: #ff5252; }
        .detail-value.accent-warn   { color: #ffc107; }

        .status-wrap {
            display: flex;
            align-items: center;
            gap: 7px;
            font-family: 'IBM Plex Mono', monospace;
            font-size: 12px;
            color: var(--text-dim);
        }

        .status-dot {
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background: var(--accent);
            flex-shrink: 0;
            animation: dot-blink 2.5s ease-in-out infinite;
        }
        .status-dot.error     { background: #ff5252; animation: none; }
        .status-dot.cancelled { background: #ffc107; animation: none; }

        @keyframes dot-blink {
            0%, 100% { opacity: 1; }
            50%       { opacity: 0.25; }
        }

        .hidden { display: none; }
    </style>
</head>
<body>
<div class="container">
    <div class="card" id="card">

        <div class="header">
            <!-- success -->
            <svg id="icon-success" class="icon-svg" viewBox="0 0 22 22">
                <circle class="check-circle" cx="11" cy="11" r="10"/>
                <polyline class="check-tick" points="6.5,11 9.5,14 15.5,8"/>
            </svg>
            <!-- error -->
            <svg id="icon-error" class="icon-svg hidden" viewBox="0 0 22 22">
                <circle class="error-circle" cx="11" cy="11" r="10"/>
                <line class="error-x" x1="7.5" y1="7.5" x2="14.5" y2="14.5"/>
                <line class="error-x" x1="14.5" y1="7.5" x2="7.5" y2="14.5"/>
            </svg>
            <!-- cancelled -->
            <svg id="icon-cancelled" class="icon-svg hidden" viewBox="0 0 22 22">
                <circle class="cancelled-circle" cx="11" cy="11" r="10"/>
                <line class="cancelled-line" x1="7" y1="11" x2="15" y2="11"/>
            </svg>
            <h1 id="title">Payment Successful</h1>
        </div>

        <p class="subtitle" id="subtitle">Your order has been confirmed.</p>

        <div class="details">
            <div class="detail-row" id="row-payment-id">
                <span class="detail-label">Payment ID</span>
                <span class="detail-value accent" id="val-payment-id">—</span>
            </div>
            <div class="detail-row" id="row-charge-code">
                <span class="detail-label">Charge Code</span>
                <span class="detail-value accent" id="val-charge-code">—</span>
            </div>
            <div class="detail-row" id="row-provider">
                <span class="detail-label">Provider</span>
                <span class="detail-value" id="val-provider">—</span>
            </div>
            <div class="detail-row" id="row-order-id">
                <span class="detail-label">Order ID</span>
                <span class="detail-value" id="val-order-id">—</span>
            </div>
            <div class="detail-row" id="row-amount">
                <span class="detail-label">Amount</span>
                <span class="detail-value accent" id="val-amount">—</span>
            </div>
            <div class="detail-row" id="row-type">
                <span class="detail-label">Type</span>
                <span class="detail-value" id="val-type">—</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Status</span>
                <span class="status-wrap">
                    <span class="status-dot" id="status-dot"></span>
                    <span id="status-text">Confirmed</span>
                </span>
            </div>
        </div>

    </div>
</div>

<script>
    const params   = new URLSearchParams(window.location.search);
    const status   = params.get('status') || 'success';
    const provider = params.get('provider') || '';
    const type     = params.get('type');

    // paypal params
    const paymentId = params.get('payment_id') || params.get('paymentId') || params.get('token');
    const orderId   = params.get('order_id')   || params.get('orderId');
    const amount    = params.get('amount');
    const currency  = params.get('currency');

    // coinbase params
    const chargeCode = params.get('charge_code') || params.get('chargeCode');
    const chargeId   = params.get('charge_id')   || params.get('chargeId');

    const card       = document.getElementById('card');
    const title      = document.getElementById('title');
    const subtitle   = document.getElementById('subtitle');
    const statusDot  = document.getElementById('status-dot');
    const statusText = document.getElementById('status-text');

    const configs = {
        success: {
            icon: 'success',
            title: type === 'subscription' ? 'Subscription Activated' : 'Payment Successful',
            subtitle: type === 'subscription' ? 'Your subscription is now active.' : 'Your order has been confirmed.',
            statusLabel: type === 'subscription' ? 'Active' : 'Confirmed',
            dotClass: '',
            accentClass: 'accent',
            cardClass: ''
        },
        error: {
            icon: 'error',
            title: type === 'subscription' ? 'Subscription Failed' : 'Payment Failed',
            subtitle: 'Something went wrong. Please try again.',
            statusLabel: 'Failed',
            dotClass: 'error',
            accentClass: 'accent-error',
            cardClass: 'status-error'
        },
        cancelled: {
            icon: 'cancelled',
            title: 'Payment Cancelled',
            subtitle: 'The payment was cancelled.',
            statusLabel: 'Cancelled',
            dotClass: 'cancelled',
            accentClass: 'accent-warn',
            cardClass: 'status-cancelled'
        }
    };

    const cfg = configs[status] || configs.success;

    // apply status styles
    document.body.classList.add(`status-${status}`);
    if (cfg.cardClass) card.classList.add(cfg.cardClass);

    document.getElementById('icon-success').classList.toggle('hidden', cfg.icon !== 'success');
    document.getElementById('icon-error').classList.toggle('hidden', cfg.icon !== 'error');
    document.getElementById('icon-cancelled').classList.toggle('hidden', cfg.icon !== 'cancelled');

    title.textContent    = cfg.title;
    subtitle.textContent = cfg.subtitle;
    statusDot.className  = 'status-dot ' + cfg.dotClass;
    statusText.textContent = cfg.statusLabel;

    // update accent color on amount + payment id
    document.getElementById('val-payment-id').className = 'detail-value ' + cfg.accentClass;
    document.getElementById('val-amount').className     = 'detail-value ' + cfg.accentClass;
    document.getElementById('val-charge-code').className = 'detail-value ' + cfg.accentClass;

    function setRow(rowId, valId, value) {
        if (value) {
            document.getElementById(valId).textContent = value;
        } else {
            const row = document.getElementById(rowId);
            if (row) row.classList.add('hidden');
        }
    }

    setRow('row-payment-id',  'val-payment-id',  paymentId || chargeId);
    setRow('row-charge-code', 'val-charge-code', chargeCode);
    setRow('row-provider',    'val-provider',    provider ? provider.toUpperCase() : null);
    setRow('row-order-id',    'val-order-id',    orderId);
    setRow('row-amount',      'val-amount',      amount ? `${amount} ${currency || ''}`.trim() : null);
    setRow('row-type',        'val-type',        type ? type.charAt(0).toUpperCase() + type.slice(1) : null);
</script>
</body>
</html>